<div class="panel mb10 panel_border">
    <div class="uk-panel uk-panel-header pd5 <%- (user=='') ? '' : 'uk-hidden' %>"><!-- 
        <h3 class="uk-panel-title">用户信息</h3> -->
        <div class="uk-tab-center mb10">
            <ul class="uk-tab" data-uk-tab="{connect:'#tab-user-content'}">
                <li class="uk-active"><a href="#">登&nbsp;陆</a></li>
                <li><a href="#">注&nbsp;册</a></li>
            </ul>
        </div>
        <div class="uk-container uk-container-center">
            
            <ul id="tab-user-content" class="uk-switcher uk-margin">
                <li>
                    <div class="uk-form mb10">
                        <div class="uk-form-icon mb10">
                            <i class="uk-icon-envelope-o"></i>
                            <input type="text" id="login_email" placeholder="邮箱帐号">
                        </div>
                        <div class="uk-form-icon mb10">
                            <i class="uk-icon-keyboard-o"></i>
                            <input type="password" id="login_password" placeholder="输入密码">
                        </div>   
                    </div>
                    <button class="uk-button uk-button-success" id="login">登&nbsp;陆</button>
                </li>
                <li>
                    <div class="uk-form mb10">
                        <div class="uk-form-icon mb10">
                            <i class="uk-icon-envelope-o"></i>
                            <input type="text" id="reg_email" placeholder="邮箱帐号">
                        </div>
                        <div class="uk-form-icon mb10">
                            <i class="uk-icon-keyboard-o"></i>
                            <input type="password" id="reg_password" placeholder="输入密码">
                        </div>
                        <div class="uk-form-icon mb10">
                            <i class="uk-icon-retweet"></i>
                            <input type="password" id="reg_passwordRepeat" placeholder="确认密码">
                        </div>
                        <div class="uk-form-icon mb10">
                            <i class="uk-icon-user"></i>
                            <input type="text" id="reg_userName" placeholder="输入昵称">
                        </div>
                        <button class="uk-button uk-button-success" id='regUser'>注&nbsp;册</button>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="uk-panel uk-panel-header pd5 <%- user=='' ? 'uk-hidden' : '' %> ">
        <h3 class="uk-panel-title">用户信息</h3>
        <div class="uk-grid user_info" data-uk-grid-margin>
            <div class="uk-width-medium-1-2">
                <img class="uk-border-circle" id="user_headSrc" width="120" height="120" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTIwcHgiIGhlaWdodD0iMTIwcHgiIHZpZXdCb3g9IjAgMCAxMjAgMTIwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMjAgMTIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxyZWN0IGZpbGw9IiNGRkZGRkYiIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIi8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjRTBFMEUwIiBkPSJNMTA5LjM1NCw5OS40NzhjLTAuNTAyLTIuODA2LTEuMTM4LTUuNDA0LTEuOTAzLTcuODAxYy0wLjc2Ny0yLjM5Ny0xLjc5Ny00LjczMi0zLjA5My03LjAxMQ0KCQljLTEuMjk0LTIuMjc2LTIuNzc4LTQuMjE3LTQuNDU1LTUuODIzYy0xLjY4MS0xLjYwNC0zLjcyOS0yLjg4Ny02LjE0OC0zLjg0NmMtMi40MjEtMC45NTgtNS4wOTQtMS40MzgtOC4wMTctMS40MzgNCgkJYy0wLjQzMSwwLTEuNDM3LDAuNTE2LTMuMDIsMS41NDVjLTEuNTgxLDEuMDMyLTMuMzY3LDIuMTgyLTUuMzU1LDMuNDVjLTEuOTksMS4yNzEtNC41NzgsMi40MjEtNy43NjUsMy40NTENCgkJQzY2LjQxLDgzLjAzNyw2My4yMSw4My41NTIsNjAsODMuNTUyYy0zLjIxMSwwLTYuNDEtMC41MTUtOS41OTgtMS41NDZjLTMuMTg4LTEuMDMtNS43NzctMi4xODEtNy43NjUtMy40NTENCgkJYy0xLjk5MS0xLjI2OS0zLjc3NC0yLjQxOC01LjM1NS0zLjQ1Yy0xLjU4Mi0xLjAyOS0yLjU4OC0xLjU0NS0zLjAyLTEuNTQ1Yy0yLjkyNiwwLTUuNTk4LDAuNDc5LTguMDE3LDEuNDM4DQoJCWMtMi40MiwwLjk1OS00LjQ3MSwyLjI0MS02LjE0NiwzLjg0NmMtMS42ODEsMS42MDYtMy4xNjQsMy41NDctNC40NTgsNS44MjNjLTEuMjk0LDIuMjc4LTIuMzI2LDQuNjEzLTMuMDkyLDcuMDExDQoJCWMtMC43NjcsMi4zOTYtMS40MDIsNC45OTUtMS45MDYsNy44MDFjLTAuNTAyLDIuODAzLTAuODM5LDUuNDE1LTEuMDA2LDcuODM1Yy0wLjE2OCwyLjQyMS0wLjI1Miw0LjkwMi0wLjI1Miw3LjQ0DQoJCWMwLDEuODg0LDAuMjA3LDMuNjI0LDAuNTgyLDUuMjQ3aDEwMC4wNjNjMC4zNzUtMS42MjMsMC41ODItMy4zNjMsMC41ODItNS4yNDdjMC0yLjUzOC0wLjA4NC01LjAyLTAuMjUzLTcuNDQNCgkJQzExMC4xOTIsMTA0Ljg5MywxMDkuODU3LDEwMi4yOCwxMDkuMzU0LDk5LjQ3OHoiLz4NCgk8cGF0aCBmaWxsPSIjRTBFMEUwIiBkPSJNNjAsNzguMTZjNy42MiwwLDE0LjEyNi0yLjY5NiwxOS41Mi04LjA4OGM1LjM5Mi01LjM5Myw4LjA4OC0xMS44OTgsOC4wODgtMTkuNTE5DQoJCXMtMi42OTYtMTQuMTI2LTguMDg4LTE5LjUxOUM3NC4xMjYsMjUuNjQzLDY3LjYyLDIyLjk0Niw2MCwyMi45NDZzLTE0LjEyOCwyLjY5Ny0xOS41MTksOC4wODkNCgkJYy01LjM5NCw1LjM5Mi04LjA4OSwxMS44OTctOC4wODksMTkuNTE5czIuNjk1LDE0LjEyNiw4LjA4OSwxOS41MTlDNDUuODcyLDc1LjQ2NCw1Mi4zOCw3OC4xNiw2MCw3OC4xNnoiLz4NCjwvZz4NCjwvc3ZnPg0K" alt="">
            </div>
            <div class="uk-width-1-2"><%- user.name ? user.name : ''%></div>
            <div class="uk-width-1-2">排名: 1</div>
            <div class="uk-width-1-2">收藏: 22 帖</div>
            <div class="uk-width-1-2">关注: 33 人</div>
            <div class="uk-width-1-1">等级: 12级
            </div>
            <div class="uk-width-1-1 jybfb">
                <div class="uk-progress uk-progress-small uk-progress-success uk-progress-striped uk-active">
                    <div class="uk-progress-bar" style="width: <%- (2222/9999)*100 %>%;"></div>
                </div>
                <div class="jybfb_bar">
                    2222/9999
                </div>
            </div>
            <div class="uk-width-1-1" id="user_describe">“ 这家伙很懒，什么个性签名都没有留下。 ”</div>
            <div class="uk-width-1-1 uk-clearfix">
                <div class="uk-button-group uk-float-right">
                    <a class="uk-button uk-button-success" href="/topic/create">发帖</a>
                    <a class="uk-button uk-button-success" href="###">设置</a>
                    <a class="uk-button uk-button-success" href="/logout">退出</a>
                </div>
            </div>
        </div>


    </div>
</div>
<script type="text/javascript">
$(function(){
    var email,userName,passWord,passwordRepeat;
    //注册
    $('#regUser').click(function(){
        email = $('#reg_email').val();
        userName = $('#reg_userName').val();
        passWord = $('#reg_password').val();
        passwordRepeat = $('#reg_passwordRepeat').val();
        //校验
        if(changeCheck('reg')){
            $.ajax({
                type: 'POST',
                url: '/signin',
                data: {email : email, userName : userName, passWord : passWord},
                success: function(result){
                    if(0 == result.status){
                        $.UIkit.notify(result.content, {pos:'top-right',status:'success',timeout: 1000});
                        window.location.href = '/';
                    }else{
                        $.UIkit.notify(result.content, {pos:'top-right',status:'danger',timeout: 1000});
                    }
                }
            });
        }
    });
    //登陆
    $('#login').click(function(){
        email = $('#login_email').val();
        passWord = $('#login_password').val();
        //校验
        if(changeCheck()){
            $.ajax({
                type: 'POST',
                url: '/login',
                data: {email : email, passWord : passWord},
                success: function(result){
                    if(0 == result.status){
                        $.UIkit.notify(result.content, {pos:'top-right',status:'success',timeout: 1000});
                        window.location.href = '/';
                    }else{
                        $.UIkit.notify(result.content, {pos:'top-right',status:'danger',timeout: 1000});
                    }
                }
            });
        }
    });

    function changeCheck(type){
        
        var userPatrn = /^(\w|[\u4e00-\u9fa5]){2,10}$/;
        var pwdPatrn = /^(\w){5,10}$/;
        var emailPatrn = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;
        if('' == email){
            $.UIkit.notify('邮箱不能为空', {pos:'top-right',status:'warning',timeout: 1000});
            return false;
        }
        if(!emailPatrn.exec(email)){
            $.UIkit.notify('请输入正确的邮箱', {pos:'top-right',status:'warning',timeout: 1000});
            return false;
        }
        if('' == passWord){
            $.UIkit.notify('密码不能为空', {pos:'top-right',status:'warning',timeout: 1000});
            return false;
        }
        if(!pwdPatrn.exec(passWord)){
            $.UIkit.notify('密码只能输入5-20个字母、数字、下划线', {pos:'top-right',status:'warning',timeout: 1000});
            return false;
        }
        if(type === 'reg'){
            if('' == userName){
                $.UIkit.notify('昵称不能为空', {pos:'top-right',status:'warning',timeout: 1000});
                return false;
            }
            if(!userPatrn.exec(userName)){
                $.UIkit.notify('昵称只能输入2-10个字母、汉字、数字、下划线', {pos:'top-right',status:'warning',timeout: 1000});
                return false;
            }
            if('' == passwordRepeat){
                $.UIkit.notify('密码不能为空', {pos:'top-right',status:'warning',timeout: 1000});
                return false;
            }
            if(passWord != passwordRepeat){
                $.UIkit.notify('密码不相同,请重新输入', {pos:'top-right',status:'warning',timeout: 1000});
                return false;
            }
            if(!pwdPatrn.exec(passwordRepeat)){
            $.UIkit.notify('密码只能输入5-20个字母、数字、下划线', {pos:'top-right',status:'warning',timeout: 1000});
            return false;
        }
        }
        return true;
    }
});
</script>